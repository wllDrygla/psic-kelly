var MiniHeader;(function(n){function br(){if(pMMUtils&&typeof pMMUtils!="undefined"&&typeof pMMUtils.gebc=="function"&&typeof pMMUtils.gfbc=="function"&&typeof pMMUtils.sa=="function"&&typeof pMMUtils.r=="function"&&typeof pMMUtils.ib=="function"&&typeof pMMUtils.so=="function"&&typeof pMMUtils.sdt=="function"&&typeof pMMUtils.goh=="function"&&typeof pMMUtils.rc=="function"&&typeof pMMUtils.gs=="function")t=pMMUtils;else{t=null;return}if(h&&h.lastChild&&GetScrollTop){if(nu(),ft=!0,d){var n=t.gebc("b_scopebar",_d);n&&n.length>0&&(p=n[0])}sj_be(_w,"unload",bt);sj_evt.bind("ajax.unload",bt);sj_evt.bind("ajax.load",di);y&&sj_be(y,"click",sr);dr();tr();gi();rr();kr()}}function kr(){var r=h.getBoundingClientRect(),i,n;if(r.bottom<=0&&t)for(i=_d.querySelectorAll("#miniheader a, #miniheader input"),n=0;n<i.length;n++)t.sa(i[n],"tabindex","-1")}function di(){tr();gi();rr();a=_ge(vi);g=_ge(li);w=_ge(ci)}function gi(){typeof MhConfig!="undefined"&&MhConfig&&(MhConfig.is!=null&&(lt=MhConfig.is),MhConfig.sbfc!=null&&(yi=MhConfig.sbfc),MhConfig.edsfs!=null&&(wi=MhConfig.edsfs),MhConfig.psfdss!=null&&(bi=MhConfig.psfdss),MhConfig.ucrs!=null&&(ki=MhConfig.ucrs))}function dr(){var n,r;if(t)for(n=0;n<i.length;n++)r=t.ga(i[n],"type"),r&&(gt[r]=n)}function nr(n){for(var t=n,i=0;t;)i+=t.offsetTop,t=t.parentElement;return i}function tr(){var r=_ge("rfPane"),f=_ge("vsb_vid_cat"),n;f?nt=nr(f):r?nt=nr(r):(n=_ge("b_header"),nt=n?n.clientHeight:0);var e=ir(),i=t.gcs(h.querySelector("table")),o=i&&!isNaN(parseInt(i.height))?parseInt(i.height):0;v=[0];v[u.Hide]=-(e+o+vr);v[u.Pinned]=-e;v[u.Expand]=0}function ir(){var r=0,n,i;return p&&t&&(n=t.gcs(p),n&&(i=parseInt(n.height),r=isNaN(i)?0:i)),r}function rr(){if(t){if(o&&(b=o.querySelector('[name="form"]'),ni=b?b.value:""),r=0,lt==u.Pinned)t.sa(h,"aria-hidden",!1),sj_be(_w,"scroll",or),ur(),it(u.Pinned);else if(lt==u.Hide){t.sa(h,"aria-hidden",!0);sj_be(_w,"scroll",yt);it(u.Hide);var n=GetScrollTop();n>nt?(fi(),typeof MiniHdrImgLoader=="undefined"||MiniHdrImgLoader===null||MiniHdrImgLoader.LoadThumbnail(r)):pt();et=n}i.length>0&&(t.so(i[r],1),t.sdt(i[r],DisplayType.Block));t.sdt(h,DisplayType.Block)}}function gr(){var n,i,r,u;t&&(n=_ge("miniheader_logo"),i=t.gfbc("b_searchboxForm"),ki&&n&&i&&(r=n.firstChild,u=i.firstChild,r&&u&&(t.r(n,r),t.ib(i,r,u))),h&&k&&(k.style.display="none",n&&(n.style.visibility="hidden")))}function nu(){var n,i,r;s!=null&&e!=null&&o!=null&&t&&(n=t.ga(s,"data-query-override"),e!=null&&n&&(e.value=n),i=t.ga(s,"data-target-override"),o!=null&&i&&t.sa(o,"target",i),r=t.ga(s,"data-action-override"),o!=null&&r&&t.sa(o,"action",r))}function ur(){ot&&(sb_ct(ot),ot=null);o&&s&&(s.style.visibility="visible",b&&(b.value=yi),a=ri(o,s,vi,!1,!0,ar),f&&a&&f.parentNode&&a.parentNode&&f.parentNode===a.parentNode&&(g=ri(f,s,li,!0)),e&&(f&&sj_be(f,"mousedown",at),st&&sj_be(st,"mousedown",at),sj_be(e,"focus",fr),sj_be(e,"blur",vt)));p&&d&&(w=ri(p,d,ci));gr();tu()}function tu(){v[u.Pinned]=-ir()}function at(){sj_ue(e,"blur",vt)}function fr(){e&&t&&(ct&&(sb_ct(ct),ct=null),sj_evt.fire(n.SearchBoxEvent[n.SearchBoxEvent.SearchBoxStatusChange],n.SearchBoxStatus.Focus),t.ac(e,"focus"),t.ac(h,"sb-focused"),f&&f.firstChild&&t.sdt&&t.sdt(f.firstChild,DisplayType.Block))}function er(){e&&e.blur()}function vt(){t&&(f&&f.firstChild&&t.goh(f.firstChild)>0&&t.sdt(f.firstChild,DisplayType.Default),sj_evt.fire(n.SearchBoxEvent[n.SearchBoxEvent.SearchBoxStatusChange],n.SearchBoxStatus.Blur),ct=sb_st(function(){t.rc(e,"focus");t.rc(h,"sb-focused")},pr))}function ri(n,t,i,r,u,f){r===void 0&&(r=!1);u===void 0&&(u=!1);f===void 0&&(f=null);var e=sj_ce("span",i);return n.parentNode&&n.parentNode.replaceChild(e,n),!t.firstChild||r&&t.firstElementChild.id!==n.id||u&&t.firstElementChild.id===f?t.appendChild(n):t.firstChild.parentNode.replaceChild(n,t.firstChild),e}function iu(){while(s.children.length>0)s.removeChild(s.lastChild)}function ru(){if(hr(),o&&a&&t){if(b&&ni&&(b.value=ni),s.style.visibility="hidden",s.firstChild){var n=t.gebc("b_searchboxForm",o);n&&n.length>0&&s.replaceChild(n[0].cloneNode(!0),s.firstChild)}a.parentNode&&a.parentNode.replaceChild(o,a);f&&g&&g.parentNode&&g.parentNode.replaceChild(f,g)}p&&w&&d.firstChild&&(d.replaceChild(w.cloneNode(!0),d.firstChild),w.parentNode&&w.parentNode.replaceChild(p,w));ot=sb_st(function(){ot=null;iu()},1e3)}function or(){var n=GetScrollTop(),t=n-et;Math.abs(t)<=pi||(er(),et=n)}function yt(){var t=GetScrollTop(),i=t-et,n,f;Math.abs(i)<=pi||(er(),t>nt?(fi(),i>0?ut==u.Expand&&it(u.Pinned):i<0&&ut==u.Pinned&&it(u.Expand),n=uu(t),typeof MiniHdrImgLoader=="undefined"||MiniHdrImgLoader===null||MiniHdrImgLoader.LoadThumbnail(n),n!==c&&(f=n>c?"down":"up",c=n,wt(c),dt("Change",{Direction:f},l[c]?l[c]:""))):(pt(),r!=0&&(c=0,wt(0))),et=t)}function uu(n){var i,t;if(rt.length>1){for(i=0,t=1;t<rt.length;t++){if(rt[t]>n)return i;i=t}return i}return wi?Math.min(Math.floor(n/bi),lr):0}function fu(n){return gt[l[n]]?gt[l[n]]:n}function sr(){var n=(r+1)%i.length;dt("Click",{Component:"dsselector"},l[n]?l[n]:"",!0);wt(n)}function it(i){t.smt(h,v[i]);ut=i;n.visibleHeight=v[i]-v[u.Hide]}function fi(){ut==u.Hide&&t&&(k&&(k.style.display="none"),t.sa(h,"aria-hidden",!1),kt(i[r],!0),ei(r),ur(),it(u.Pinned),ui=sb_gt(),dt("Show",null,l[r]?l[r]:""),sj_evt.fire(n.MiniHeaderEvent[n.MiniHeaderEvent.ShowMiniHeader]))}function pt(){ut!=u.Hide&&t&&(k&&(k.style.display="flex"),t.sa(h,"aria-hidden",!0),kt(i[r],!1),it(u.Hide),ru(),ui&&dt("Hide",{Duration:sb_gt()-ui}),sj_evt.fire(n.MiniHeaderEvent[n.MiniHeaderEvent.HideMiniHeader]))}function eu(){if(!ti&&!ft){var n=GetScrollTop();n>nt&&fi();sj_be(_w,"scroll",yt);ft=!0}}function ou(){!ti&&ft&&(pt(),sj_ue(_w,"scroll",yt),ft=!1)}function wt(n){if(i.length>n&&t&&t.gs(i[n],"display")!="block")if(kt(i[r],!1),kt(i[n],!0),typeof ii!="undefined"&&ii){var u=i[r],f=i[n];t.sdt(i[n],DisplayType.Block);n>r?MMCssAnim.animate(u,f,"up"):MMCssAnim.animate(u,f,"down");setTimeout(function(){ei(n);t.sdt(i[r],DisplayType.Default);r=n},500)}else MMAnim.fadeOut(i[r],10),MMAnim.fadeIn(i[n],10,"block",function(){ei(n);t.sdt(i[r],DisplayType.Default);r=n})}function ei(n){if(y&&t){tt||(tt=t.gebc("indic",y));tt.length>r&&tt.length>n&&(t.rc(tt[r],"sel"),t.ac(tt[n],"sel"));var f=(n+1)%i.length,u=t.gebc("lt",i[f]);u&&u.length>0&&t.sa(y,"title",u[0].innerHTML)}}function bt(){sj_ue(_w,"unload",bt);sj_evt.unbind("ajax.unload",bt);sj_evt.unbind("ajax.load",di);sj_ue(_w,"scroll",yt);sj_ue(_w,"scroll",or);y&&sj_ue(y,"click",sr);e&&vt();lt==u.Hide?pt():o&&ai&&t&&t.a(ai,o);ti=!0;hr()}function hr(){e&&(f&&sj_ue(f,"mousedown",at),st&&sj_ue(st,"mousedown",at),sj_ue(e,"focus",fr),sj_ue(e,"blur",vt))}function kt(n,i){n&&t&&t.ga(n,"data-tag")&&t.sa(n,"data-tag","multimedia.miniHeaderData"+(i?"Visible":""))}function dt(n,t,i,r){if(wr||r){var u=i?i:n;oi[u]||(i&&(t||(t={}),t.Dataset=i),cr.logEvent(null,"CI."+n,null,"miniheader",t,null),oi[u]=!0)}}function su(n,t){var i,r;ht[n]||(ht[n]=rt.length);t=t+(si?si.offsetTop:0)+yr;i=ht[n];rt[i]=t;l[i]=n;r=GetScrollTop();r>t&&(c=ht[n],wt(fu(c)))}var t=typeof pMMUtils!="undefined"?pMMUtils:null,cr=pInstr,h=_ge("miniheader"),hi=_ge("miniheader_data"),k=_ge("tallhead"),i=hi?hi.children:[],lr=i.length,y=_ge("miniheader_switch"),d=_ge("miniheader_scope"),p,s=_ge("miniheader_searchbox"),w,ci="scope_pl",g,li="as_pl",f=_ge("sw_as"),e=_ge("sb_form_q"),st=_ge("sb_form_go"),rt=[0],l=["RelatedSearch"],gt={},ht={},r,ut,u,ot,c,ui,oi,si;(function(n){n[n.Hide=0]="Hide";n[n.Pinned=1]="Pinned";n[n.Expand=2]="Expand"})(u||(u={}));var v,o=_ge("sb_form"),ai=o?o.parentNode:null,a,vi="search_pl",ar="mnh_sbc",nt=0,ft;n.visibleHeight=0;var ni,yi="QBIRMH",b,vr=10,yr=75,tt,pi=30,pr=300,ct,wr=!1,ti=!1,et=0,lt=u.Hide,wi=!1,bi=1e3,ki=!1,ii;typeof MMCssAnim!="undefined"&&MMCssAnim&&(ii=MMCssAnim);n.init=br;c=0;n.enable=eu;n.disable=ou;oi={};si=_ge("vm_res")||_ge("vm_c");n.registerInlineBlock=su})(MiniHeader||(MiniHeader={}));MiniHeader.init()